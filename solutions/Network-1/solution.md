# Сети
Список сетевых интерфейсов в Linux можно вывести следующими способами:
```
ifconfig
```
![1.png](/solutions/Network-1/screenshots/1.png)
```
ip a
```
![2.png](/solutions/Network-1/screenshots/2.png)
```
nmcli device show
```
![3.png](/solutions/Network-1/screenshots/3.png)
```
netstat -i
```
![4.png](/solutions/Network-1/screenshots/4.png)
```
cat /proc/net/dev
```
![5.png](/solutions/Network-1/screenshots/5.png)

## Изменение IP адреса
Изменить IP адрес можно командой `ifconfig`, а затем проверить изменения командой `ip`.
```
ifconfig enp0s3 192.168.0.100/24
ip a show enp0s3
```
![6.png](/solutions/Network-1/screenshots/6.png)

## Добавление IP адресов
Добавить IP адреса можно командой `ip` и ей же проверить изменения.
```
ip a add 192.168.0.101/24 dev enp0s3
ip a add 192.168.0.102/24 dev enp0s3
ip a show enp0s3
```
![7.png](/solutions/Network-1/screenshots/7.png)

## Список маршрутов
Для начала откатим все изменения с IP адресами:
```
ip a del 192.168.0.102/24 dev enp0s3
ip a del 192.168.0.101/24 dev enp0s3
ifconfig enp0s3 10.0.2.15/24
ip a show enp0s3
```
![8.png](/solutions/Network-1/screenshots/8.png)

Список маршрутов в Linux можно вывести следующими способами:
```
ip r
```
![9.png](/solutions/Network-1/screenshots/9.png)
```
route
```
![10.png](/solutions/Network-1/screenshots/10.png)
```
routel
```
![11.png](/solutions/Network-1/screenshots/11.png)

## Таблица ARP
Таблицу ARP в Linux можно вывести следующими способами:
```
ip n
arp -a
cat /proc/net/arp
```
![12.png](/solutions/Network-1/screenshots/12.png)

## Термины и определения
**IP адрес** — уникальный числовой идентификатор устройства в компьютерной сети, работающей по протоколу IP (Internet Protocol).

В сети Интернет требуется глобальная уникальность адреса; в случае работы в локальной сети требуется уникальность адреса в пределах сети.
В версии протокола **IPv4** IP-адрес имеет длину 4 байта, а в версии протокола **IPv6** — 16 байт.

**Маршрутизация** — процесс определения оптимального маршрута данных в сетях связи.
Маршруты могут задаваться административно (статические маршруты), либо вычисляться с помощью алгоритмов маршрутизации,
базируясь на информации о топологии и состоянии сети, полученной с помощью протоколов маршрутизации (динамические маршруты).
Статические маршруты могут изменяться в зависимости от расписания.

Маршрутизация в компьютерных сетях выполняется специальными программно-аппаратными средствами — **маршрутизаторами**;
в простых конфигурациях может выполняться и компьютерами общего назначения, соответственно настроенными.

**ARP** (Address Resolution Protocol — протокол определения адреса) — протокол в компьютерных сетях,
предназначенный для определения MAC-адреса другого компьютера по известному IP-адресу.
ARP был спроектирован для передачи IP-пакетов через пакеты (кадры) Ethernet.
Принцип выяснения аппаратного адреса целевого хоста, использованный в ARP, был затем использован в сетях других типов.
Наибольшее распространение ARP получил благодаря повсеместности сетей IP, построенных поверх Ethernet, поскольку в них практически всегда используется ARP.
В семействе протоколов IPv6 ARP не существует, его функции возложены на ICMPv6.

**DHCP** (Dynamic Host Configuration Protocol — протокол динамической настройки узла) — сетевой протокол,
позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP.
Данный протокол работает по модели «клиент-сервер». Для автоматической конфигурации компьютер-клиент
на этапе конфигурации сетевого устройства обращается к так называемому серверу DHCP и получает от него нужные параметры.
Сетевой администратор может задать диапазон адресов, распределяемых сервером среди компьютеров.
Это позволяет избежать ручной настройки компьютеров сети и уменьшает количество ошибок.

**DNS** (Domain Name System — система доменных имен) — компьютерная распределенная система для получения информации о доменах.
Чаще всего используется для получения IP-адреса по имени хоста (компьютера или устройства),
получения информации о маршрутизации почты и/или обслуживающих узлах для протоколов в домене (SRV-запись).

**NTP** (Network Time Protocol — протокол сетевого времени) — сетевой протокол
для синхронизации внутренних часов компьютера с использованием сетей с переменной латентностью.
NTP, основанный на алгоритме Марзулло, использует для своей работы протокол UDP и учитывает время передачи.
Система NTP чрезвычайно устойчива к изменениям латентности среды передачи.
В версии 4 способен достигать точности 10 мс (1/100 с) при работе через Интернет, и до 0,2 мс (1/5000 с) и лучше внутри локальных сетей.
Наиболее широкое применение протокол NTP находит для синхронизации серверов точного времени.
Для достижения максимальной точности предпочтительна постоянная работа программного обеспечения NTP в режиме системной службы.
В семействе операционных систем Microsoft Windows — это служба **W32Time**, в UNIX-подобных системах — демон **Ntpd** или **chronyd**.

**Широковещательный запрос** — запрос, предназначенный для получения всеми компьютерами сети.
Для этого запрос посылается на специальный IP или MAC-адрес для работы на третьем или втором уровне модели OSI.

**Широковещательный адрес** — условный (не присвоенный никакому устройству в сети) адрес,
который используется для передачи широковещательных пакетов в компьютерных сетях.
В зависимости от уровня модели OSI различают несколько видов широковещательных адресов.
- На уровне L2 используется широковещательный MAC-адрес FF:FF:FF:FF:FF:FF для передачи служебных датаграмм (например, ARP-запросов).
Датаграммы, отправленные на такой адрес, принимаются всеми сетевыми устройствами локальной сети.
- На уровне L3 используются широковещательные адреса, вид которых зависит от протокола.
Так, в IP-сетях широковещательные адреса формируются следующим образом:
к адресу подсети прибавляется побитовая инверсия маски подсети (то есть все биты адреса сети, соответствующие нулям в маске, устанавливаются в «1»).
Например, если адрес сети равен 192.168.0.0, маска подсети 255.255.255.0, то широковещательный адрес будет 192.168.0.255.

**Сетевой карте** можно задавать следующие параметры:
- IP адрес;
- Маска подсети;
- Шлюз по умолчанию — адрес маршрутизатора для выхода в другие сети;
- DNS-серверы — адреса серверов DNS, используемых для разрешения доменных имен;
- MTU (Maximum Transmission Unit) — максимальный размер пакета данных;
- MAC-адрес — физический адрес сетевой карты.

**Маска подсети** — битовая маска, позволяющая разделить IP-адрес на адрес подсети и адрес узла (хоста, компьютера, устройства) внутри этой подсети.
Такое разделение производится путём проведения операции поразрядной конъюнкции над IP-адресом и маской. Результатом этой операции будет адрес подсети:
```
Маска подсети: 11111111 11111111 11111111 00000000 (255.255.255.0)
IP-адрес:      11000000 10101000 00000000 00000001 (192.168.0.1)
Адрес сети:    11000000 10101000 00000000 00000000 (192.168.0.0)
```
Поскольку маска подсети всегда состоит из некоторого количества единичных битов, идущих подряд (начиная с самого старшего),
её нередко записывают в сокращённом виде — указывая количество таких битов после косой черты.
Так, в вышеприведённом примере маску подсети вместо `255.255.255.0` можно сокращённо записать как `/24`.

128-битная адресация в протоколе IPv6 осуществляется аналогичным образом.
Так, адрес `2001:0DB8:0001:0000:6C1F:A78A:3CB5:1ADD` с длиной префикса 32 бита будет находиться в сети `2001:0DB8::/32`.

Разбиение одной большой сети на несколько меньших позволяет упростить маршрутизацию.
